import{u as w,r as f,c as j,o as z,B as L,M as R,a as l,j as u,b as s,h as I,t as a,i as v,F as C,m as M,n as N,s as H,k as B,v as h,C as V,L as K,e as Q,p as W}from"./vendor-xt8QQBuL.js";import{a as G}from"./index-DooXIuO7.js";import"./animations-Brfk6Bdo.js";const X={class:"multi-task-manager"},Y={class:"task-header"},Z={class:"task-title"},x={class:"task-actions"},ss={key:0,class:"task-list"},ts={class:"task-content"},es={class:"task-info"},as={class:"task-icon"},os={class:"task-details"},ns={class:"task-name"},is={class:"task-meta"},ls={class:"timer-type"},us={class:"task-time"},ds={class:"task-progress"},rs={class:"task-controls"},cs=["onClick","disabled"],ms=["onClick"],vs=["onClick"],ps=["onClick"],ks={key:0,class:"task-status-badge"},fs={key:1,class:"empty-tasks"},gs={class:"empty-text"},_s={class:"modal-header"},$s={class:"modal-title"},hs={class:"modal-body"},Ts={class:"form-group"},ys={for:"task-name"},Ss=["placeholder"],bs={class:"form-group"},Is={for:"timer-type"},Cs={value:""},Ms={value:"egg"},Ns={value:"clock"},Vs={value:"candle"},ws={value:"snail"},Bs={value:"duck"},Gs={value:"puppy"},Us={value:"rocket"},As={value:"running"},Fs={class:"form-group time-input-group"},Ps={class:"time-inputs"},qs={class:"time-field"},Ds={class:"time-field"},Os={class:"form-group"},Es={for:"task-goal"},Js={value:""},js=["value"],zs={class:"modal-footer"},Ls=["disabled"],Rs={__name:"MultiTaskManager",setup(U){const{t:g}=w(),d=f([]),n=f({name:"",timerType:"",minutes:5,seconds:0,goalId:"",status:"paused",remainingSeconds:0,totalSeconds:0,id:""}),r=f([]),i=f(!1),c=f({}),T=j(()=>n.value.name.trim()!==""&&n.value.timerType!==""&&(n.value.minutes>0||n.value.seconds>0)),A=e=>({egg:"fas fa-egg",clock:"fas fa-clock",candle:"fas fa-fire",snail:"fas fa-bug",duck:"fas fa-feather",puppy:"fas fa-dog",rocket:"fas fa-rocket",running:"fas fa-running"})[e]||"fas fa-hourglass",F=e=>g(`timers.${e}`)||e,P=e=>{const t=Math.floor(e/60),m=e%60;return`${t.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`},q=e=>e.totalSeconds===0?0:100-e.remainingSeconds/e.totalSeconds*100,D=()=>{if(!T.value)return;const e=n.value.minutes*60+parseInt(n.value.seconds),t={...n.value,id:Date.now().toString(),remainingSeconds:e,totalSeconds:e,status:"paused"};d.value.push(t),p(),_()},y=e=>{const t=d.value[e];t.status==="finished"&&b(e),t.status="running",p(),c.value[t.id]&&clearInterval(c.value[t.id]),c.value[t.id]=setInterval(()=>{t.remainingSeconds>0?(t.remainingSeconds--,p()):O(e)},1e3)},S=e=>{const t=d.value[e];t.status="paused",c.value[t.id]&&clearInterval(c.value[t.id]),p()},b=e=>{const t=d.value[e];t.status==="running"&&S(e),t.remainingSeconds=t.totalSeconds,t.status="paused",p()},O=e=>{const t=d.value[e];c.value[t.id]&&clearInterval(c.value[t.id]),t.status="finished",t.remainingSeconds=0,J(),p()},E=e=>{if(confirm(g("multitask.confirmRemoveTask")||"确定要移除此任务吗？")){const t=d.value[e];c.value[t.id]&&(clearInterval(c.value[t.id]),delete c.value[t.id]),d.value.splice(e,1),p()}},J=()=>{new Audio("/sounds/task-complete.mp3").play().catch(t=>{console.error("Failed to play sound:",t)})},p=()=>{const e=d.value.map(t=>({id:t.id,name:t.name,timerType:t.timerType,minutes:t.minutes,seconds:t.seconds,goalId:t.goalId,status:t.status,remainingSeconds:t.remainingSeconds,totalSeconds:t.totalSeconds}));localStorage.setItem("multiTasks",JSON.stringify(e))},_=()=>{i.value=!1,n.value={name:"",timerType:"",minutes:5,seconds:0,goalId:"",status:"paused",remainingSeconds:0,totalSeconds:0,id:""}};return z(()=>{const e=localStorage.getItem("multiTasks");e&&(d.value=JSON.parse(e),d.value.forEach((m,o)=>{m.status==="running"&&y(o)}));const t=localStorage.getItem("learningGoals");if(t){const m=JSON.parse(t);r.value=m.map((o,k)=>({...o,id:o.id||`goal-${k}`}))}}),L(()=>{Object.values(c.value).forEach(e=>{clearInterval(e)})}),(e,t)=>{const m=R("tooltip");return u(),l("div",X,[s("div",Y,[s("h2",Z,a(e.$t("multitask.title")||"多任务计时"),1),s("div",x,[v((u(),l("button",{class:"add-task-button",onClick:t[0]||(t[0]=o=>i.value=!0)},t[8]||(t[8]=[s("i",{class:"fas fa-plus"},null,-1)]))),[[m,e.$t("multitask.addTask")||"添加任务"]])])]),d.value.length>0?(u(),l("div",ss,[(u(!0),l(C,null,M(d.value,(o,k)=>(u(),l("div",{key:o.id,class:N(["task-item",{"task-running":o.status==="running","task-paused":o.status==="paused","task-finished":o.status==="finished"}])},[s("div",ts,[s("div",es,[s("div",as,[s("i",{class:N(A(o.timerType))},null,2)]),s("div",os,[s("h3",ns,a(o.name),1),s("div",is,[s("span",ls,a(F(o.timerType)),1),s("span",us,a(P(o.remainingSeconds)),1)])])]),s("div",ds,[s("div",{class:"progress-bar",style:H({width:`${q(o)}%`})},null,4)]),s("div",rs,[o.status!=="running"?v((u(),l("button",{key:0,class:"task-start",onClick:$=>y(k),disabled:o.status==="finished"},t[9]||(t[9]=[s("i",{class:"fas fa-play"},null,-1)]),8,cs)),[[m,e.$t("common.start")]]):v((u(),l("button",{key:1,class:"task-pause",onClick:$=>S(k)},t[10]||(t[10]=[s("i",{class:"fas fa-pause"},null,-1)]),8,ms)),[[m,e.$t("common.pause")]]),v((u(),l("button",{class:"task-reset",onClick:$=>b(k)},t[11]||(t[11]=[s("i",{class:"fas fa-sync-alt"},null,-1)]),8,vs)),[[m,e.$t("common.reset")]]),v((u(),l("button",{class:"task-delete",onClick:$=>E(k)},t[12]||(t[12]=[s("i",{class:"fas fa-trash"},null,-1)]),8,ps)),[[m,e.$t("multitask.removeTask")||"移除任务"]])])]),o.status==="finished"?(u(),l("div",ks,a(e.$t("common.finished")),1)):I("",!0)],2))),128))])):(u(),l("div",fs,[t[14]||(t[14]=s("div",{class:"empty-icon"},[s("i",{class:"fas fa-tasks"})],-1)),s("p",gs,a(e.$t("multitask.noTasks")||"暂无任务"),1),s("button",{class:"add-first-task",onClick:t[1]||(t[1]=o=>i.value=!0)},[t[13]||(t[13]=s("i",{class:"fas fa-plus"},null,-1)),B(" "+a(e.$t("multitask.addFirstTask")||"添加第一个任务"),1)])])),i.value?(u(),l("div",{key:2,class:"modal-overlay",onClick:_},[s("div",{class:"modal-content",onClick:t[7]||(t[7]=K(()=>{},["stop"]))},[s("div",_s,[s("h2",$s,a(e.$t("multitask.addTask")||"添加计时任务"),1),s("button",{class:"close-button",onClick:_},t[15]||(t[15]=[s("i",{class:"fas fa-times"},null,-1)]))]),s("div",hs,[s("div",Ts,[s("label",ys,a(e.$t("multitask.taskName")||"任务名称")+" *",1),v(s("input",{type:"text",id:"task-name","onUpdate:modelValue":t[2]||(t[2]=o=>n.value.name=o),placeholder:e.$t("multitask.enterTaskName")||"输入任务名称",required:""},null,8,Ss),[[h,n.value.name]])]),s("div",bs,[s("label",Is,a(e.$t("multitask.timerType")||"计时器类型")+" *",1),v(s("select",{id:"timer-type","onUpdate:modelValue":t[3]||(t[3]=o=>n.value.timerType=o),required:""},[s("option",Cs,a(e.$t("multitask.selectTimer")||"选择计时器"),1),s("option",Ms,a(e.$t("timers.egg")),1),s("option",Ns,a(e.$t("timers.clock")),1),s("option",Vs,a(e.$t("timers.candle")),1),s("option",ws,a(e.$t("timers.snail")),1),s("option",Bs,a(e.$t("timers.duck")),1),s("option",Gs,a(e.$t("timers.puppy")),1),s("option",Us,a(e.$t("timers.rocket")),1),s("option",As,a(e.$t("timers.running")),1)],512),[[V,n.value.timerType]])]),s("div",Fs,[s("label",null,a(e.$t("multitask.duration")||"持续时间")+" *",1),s("div",Ps,[s("div",qs,[v(s("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>n.value.minutes=o),min:"0",max:"60",required:""},null,512),[[h,n.value.minutes]]),s("span",null,a(e.$t("common.minutes")),1)]),t[16]||(t[16]=s("div",{class:"time-separator"},":",-1)),s("div",Ds,[v(s("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=o=>n.value.seconds=o),min:"0",max:"59",required:""},null,512),[[h,n.value.seconds]]),s("span",null,a(e.$t("common.seconds")),1)])])]),s("div",Os,[s("label",Es,a(e.$t("multitask.learningGoal")||"学习目标"),1),v(s("select",{id:"task-goal","onUpdate:modelValue":t[6]||(t[6]=o=>n.value.goalId=o)},[s("option",Js,a(e.$t("education.noGoal")||"无"),1),(u(!0),l(C,null,M(r.value,o=>(u(),l("option",{key:o.id,value:o.id},a(o.title),9,js))),128))],512),[[V,n.value.goalId]])])]),s("div",zs,[s("button",{class:"cancel-button",onClick:_},a(e.$t("common.cancel")),1),s("button",{class:"save-button",onClick:D,disabled:!T.value},a(e.$t("common.add")||"添加"),9,Ls)])])])):I("",!0)])}}},Hs=G(Rs,[["__scopeId","data-v-ba8ca47f"]]),Ks={class:"multitask-page"},Qs={class:"multitask-header"},Ws={class:"multitask-title"},Xs={class:"multitask-content"},Ys={class:"multitask-intro"},Zs={class:"intro-text"},xs={class:"multitask-manager-wrapper"},st={class:"multitask-features"},tt={class:"feature-item"},et={class:"feature-text"},at={class:"feature-item"},ot={class:"feature-text"},nt={class:"feature-item"},it={class:"feature-text"},lt={__name:"MultiTaskPage",setup(U){const g=W(),{t:d}=w(),n=()=>{g.go(-1)};return(r,i)=>(u(),l("div",Ks,[s("div",Qs,[s("button",{class:"back-button",onClick:n},[i[0]||(i[0]=s("i",{class:"fas fa-arrow-left"},null,-1)),B(" "+a(r.$t("common.back")),1)]),s("h1",Ws,a(r.$t("multitask.pageTitle")||"多任务计时"),1)]),s("div",Xs,[s("div",Ys,[i[1]||(i[1]=s("div",{class:"intro-icon"},[s("i",{class:"fas fa-tasks"})],-1)),s("div",Zs,[s("h2",null,a(r.$t("multitask.introTitle")||"同时管理多个计时器"),1),s("p",null,a(r.$t("multitask.introText")||"添加多个计时任务，同时进行多个活动的计时，提高教学效率"),1)])]),s("div",xs,[Q(Hs)]),s("div",st,[s("div",tt,[i[2]||(i[2]=s("div",{class:"feature-icon"},[s("i",{class:"fas fa-clock"})],-1)),s("div",et,[s("h3",null,a(r.$t("multitask.featureParallel")||"并行计时"),1),s("p",null,a(r.$t("multitask.featureParallelText")||"同时运行多个计时器，高效管理多个教学活动"),1)])]),s("div",at,[i[3]||(i[3]=s("div",{class:"feature-icon"},[s("i",{class:"fas fa-bell"})],-1)),s("div",ot,[s("h3",null,a(r.$t("multitask.featureAlerts")||"独立提醒"),1),s("p",null,a(r.$t("multitask.featureAlertsText")||"为每个计时器设置独立的提醒，不会互相干扰"),1)])]),s("div",nt,[i[4]||(i[4]=s("div",{class:"feature-icon"},[s("i",{class:"fas fa-save"})],-1)),s("div",it,[s("h3",null,a(r.$t("multitask.featureSave")||"自动保存"),1),s("p",null,a(r.$t("multitask.featureSaveText")||"计时状态自动保存，刷新页面或关闭后重新打开仍然保持"),1)])])])])]))}},ct=G(lt,[["__scopeId","data-v-30671ef9"]]);export{ct as default};
